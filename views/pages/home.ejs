

<%
// Sample data for stories
const stories = [
    { id: 1, user: { name: 'Jane Smith', username: 'janesmith', avatar: 'https://i.pravatar.cc/150?img=5' }, image: 'https://source.unsplash.com/random/300x500?nature', viewed: false },
    { id: 2, user: { name: 'Mike Johnson', username: 'mikejohnson', avatar: 'https://i.pravatar.cc/150?img=12' }, image: 'https://source.unsplash.com/random/300x500?city', viewed: true },
    { id: 3, user: { name: 'Sarah Williams', username: 'sarahwilliams', avatar: 'https://i.pravatar.cc/150?img=20' }, image: 'https://source.unsplash.com/random/300x500?people', viewed: false },
    { id: 4, user: { name: 'Alex Brown', username: 'alexbrown', avatar: 'https://i.pravatar.cc/150?img=33' }, image: 'https://source.unsplash.com/random/300x500?travel', viewed: true },
    { id: 5, user: { name: 'Emily Davis', username: 'emilydavis', avatar: 'https://i.pravatar.cc/150?img=25' }, image: 'https://source.unsplash.com/random/300x500?food', viewed: false }
];

// Sample data for posts
const posts = [
    {
        id: 1,
        author: { name: 'Jane Smith', username: 'janesmith', avatar: 'https://i.pravatar.cc/150?img=5' },
        content: 'Just finished my morning hike! The view was absolutely breathtaking. Nature always has a way of putting things into perspective. #MorningHike #NatureLover',
        image: 'https://source.unsplash.com/random/800x600?hiking',
        video: null,
        timeAgo: '15 minutes ago',
        likes: 42,
        comments: 8,
        shares: 3,
        commentsList: [
            { author: { name: 'Mike Johnson', avatar: 'https://i.pravatar.cc/150?img=12' }, content: 'Looks amazing! Where is this?', timeAgo: '10 minutes ago' },
            { author: { name: 'Sarah Williams', avatar: 'https://i.pravatar.cc/150?img=20' }, content: 'I need to go there! 😍', timeAgo: '5 minutes ago' }
        ]
    },
    {
        id: 2,
        author: { name: 'Mike Johnson', username: 'mikejohnson', avatar: 'https://i.pravatar.cc/150?img=12' },
        content: 'Just launched my new tech project! After months of hard work, it\'s finally live. Check it out and let me know what you think! #TechLaunch #Coding',
        image: null,
        video: 'https://sample-videos.com/video123/mp4/720/big_buck_bunny_720p_1mb.mp4',
        timeAgo: '2 hours ago',
        likes: 128,
        comments: 24,
        shares: 15,
        commentsList: [
            { author: { name: 'Alex Brown', avatar: 'https://i.pravatar.cc/150?img=33' }, content: 'This is incredible! Great job!', timeAgo: '1 hour ago' },
            { author: { name: 'Emily Davis', avatar: 'https://i.pravatar.cc/150?img=25' }, content: 'I\'ve been waiting for something like this!', timeAgo: '45 minutes ago' }
        ]
    },
    {
        id: 3,
        author: { name: 'Sarah Williams', username: 'sarahwilliams', avatar: 'https://i.pravatar.cc/150?img=20' },
        content: 'Made this delicious pasta dish for dinner tonight. The secret is in the homemade sauce! #FoodLover #HomeCooking',
        image: 'https://source.unsplash.com/random/800x600?pasta',
        video: null,
        timeAgo: '5 hours ago',
        likes: 76,
        comments: 12,
        shares: 5,
        commentsList: [
            { author: { name: 'Jane Smith', avatar: 'https://i.pravatar.cc/150?img=5' }, content: 'Looks delicious! Can you share the recipe?', timeAgo: '4 hours ago' },
            { author: { name: 'Mike Johnson', avatar: 'https://i.pravatar.cc/150?img=12' }, content: 'I\'m getting hungry just looking at this!', timeAgo: '3 hours ago' }
        ]
    }
];
%>

<div class="max-w-2xl mx-auto">
    <!-- Create Post -->
    <div class="bg-white/80 backdrop-blur-md rounded-3xl shadow-glass overflow-hidden mb-8 border border-surface-200/50 hover:shadow-glow transition-shadow duration-300 relative">
        <!-- Decorative Elements -->
        <div class="absolute -top-6 -right-6 w-12 h-12 bg-primary-500/10 rounded-full blur-xl"></div>
        <div class="absolute -bottom-6 -left-6 w-16 h-16 bg-accent-500/10 rounded-full blur-xl"></div>

        <div class="p-6 relative">
            <div class="flex items-center space-x-4">
                <div class="relative group">
                    <div class="absolute inset-0 rounded-full bg-gradient-to-r from-primary-500 to-accent-500 blur-md opacity-20 group-hover:opacity-40 transition-opacity duration-300"></div>
                    <img src="<%= user.avatar %>" alt="<%= user.name %>" class="relative w-12 h-12 rounded-full object-cover border-2 border-primary-500/20 group-hover:border-primary-500/40 transition-all duration-300">
                </div>
                <div class="flex-1 bg-surface-100/70 backdrop-blur-xs rounded-2xl px-5 py-3.5 cursor-pointer hover:bg-white/80 transition duration-200 border border-surface-200/30 hover:border-surface-200/50 group">
                    <p class="text-surface-500 group-hover:text-surface-600 transition-colors duration-200">What's on your mind, <%= user.name.split(' ')[0] %>?</p>
                </div>
            </div>

            <div class="flex items-center justify-between mt-6 pt-4 border-t border-surface-200/50">
                <button class="flex items-center space-x-2 text-surface-600 hover:text-accent-500 p-2 rounded-xl hover:bg-surface-100/70 transition duration-200 group">
                    <div class="relative w-8 h-8 flex items-center justify-center">
                        <div class="absolute inset-0 rounded-full bg-accent-500 opacity-0 group-hover:opacity-10 group-hover:blur-sm transition-all duration-200"></div>
                        <i class="fas fa-image text-accent-500 group-hover:scale-110 transition-transform duration-200"></i>
                    </div>
                    <span>Photo</span>
                </button>
                <button class="flex items-center space-x-2 text-surface-600 hover:text-secondary-500 p-2 rounded-xl hover:bg-surface-100/70 transition duration-200 group">
                    <div class="relative w-8 h-8 flex items-center justify-center">
                        <div class="absolute inset-0 rounded-full bg-secondary-500 opacity-0 group-hover:opacity-10 group-hover:blur-sm transition-all duration-200"></div>
                        <i class="fas fa-video text-secondary-500 group-hover:scale-110 transition-transform duration-200"></i>
                    </div>
                    <span>Video</span>
                </button>
                <button class="flex items-center space-x-2 text-surface-600 hover:text-primary-500 p-2 rounded-xl hover:bg-surface-100/70 transition duration-200 group">
                    <div class="relative w-8 h-8 flex items-center justify-center">
                        <div class="absolute inset-0 rounded-full bg-primary-500 opacity-0 group-hover:opacity-10 group-hover:blur-sm transition-all duration-200"></div>
                        <i class="far fa-smile text-primary-500 group-hover:scale-110 transition-transform duration-200"></i>
                    </div>
                    <span>Feeling</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Stories -->
    <div class="bg-white/80 backdrop-blur-md rounded-3xl shadow-glass overflow-hidden mb-8 border border-surface-200/50 relative">
        <!-- Decorative Elements -->
        <div class="absolute -top-8 -left-8 w-16 h-16 bg-secondary-500/10 rounded-full blur-xl"></div>
        <div class="absolute -bottom-8 right-1/4 w-20 h-20 bg-primary-500/10 rounded-full blur-xl"></div>

        <div class="p-6 relative">
            <div class="flex items-center justify-between mb-5">
                <div class="flex items-center space-x-2">
                    <div class="w-1 h-6 bg-gradient-to-b from-primary-500 to-accent-500 rounded-full"></div>
                    <h3 class="font-semibold text-lg text-surface-800">Stories</h3>
                </div>
                <button class="text-primary-600 hover:text-primary-700 text-sm font-medium flex items-center space-x-1 group">
                    <span>See All</span>
                    <i class="fas fa-chevron-right text-xs group-hover:translate-x-0.5 transition-transform duration-200"></i>
                </button>
            </div>

            <!-- Story Navigation Controls -->
            <div class="relative">
                <div class="flex space-x-4 overflow-x-auto pb-2 scrollbar-hide px-1">
                    <!-- Create Story -->
                    <div class="relative group cursor-pointer flex-shrink-0 transition duration-200 hover:scale-105 hover:-translate-y-1">
                        <div class="w-24 h-36 rounded-2xl overflow-hidden bg-gradient-to-br from-surface-100 to-surface-50 flex flex-col items-center justify-center border border-surface-200/50 shadow-soft">
                            <div class="w-10 h-10 rounded-full bg-gradient-to-r from-primary-500 to-accent-500 flex items-center justify-center mb-2 shadow-glow group-hover:shadow-neon transition-all duration-300">
                                <i class="fas fa-plus text-white group-hover:scale-110 transition-transform duration-200"></i>
                            </div>
                            <p class="text-surface-700 text-xs font-medium">Create Story</p>
                        </div>
                    </div>

                    <!-- Stories List -->
                    <% stories.forEach(story => { %>
                        <div class="flex-shrink-0 transition duration-200 hover:scale-105 hover:-translate-y-1">
                            <%- include('../partials/story', { story }) %>
                        </div>
                    <% }); %>
                </div>

                <!-- Navigation Arrows -->
                <button class="absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-1/2 w-8 h-8 rounded-full bg-white/80 backdrop-blur-sm shadow-soft flex items-center justify-center text-surface-600 hover:text-primary-600 transition-colors duration-200 border border-surface-200/50 z-10 opacity-0 hover:opacity-100 focus:opacity-100 transition-opacity duration-200">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button class="absolute right-0 top-1/2 transform -translate-y-1/2 translate-x-1/2 w-8 h-8 rounded-full bg-white/80 backdrop-blur-sm shadow-soft flex items-center justify-center text-surface-600 hover:text-primary-600 transition-colors duration-200 border border-surface-200/50 z-10 opacity-0 hover:opacity-100 focus:opacity-100 transition-opacity duration-200">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Posts -->
    <div class="space-y-8">
        <% posts.forEach(post => { %>
            <%- include('../partials/post', { post, user }) %>
        <% }); %>

        <!-- Load More -->
        <div class="flex justify-center">
            <button class="px-6 py-3 bg-white/80 backdrop-blur-md rounded-xl shadow-soft border border-surface-200/50 text-primary-600 font-medium hover:shadow-medium transition-shadow duration-200 hover:bg-white/90 group">
                <span class="flex items-center space-x-2">
                    <span>Load More</span>
                    <i class="fas fa-spinner group-hover:animate-spin transition-all duration-200"></i>
                </span>
            </button>
        </div>
    </div>
</div>

<script>
    // Toggle user dropdown
    document.getElementById('user-menu-button')?.addEventListener('click', function() {
        const dropdown = document.getElementById('user-dropdown');
        dropdown.classList.toggle('hidden');
    });

    // Close dropdown when clicking outside
    window.addEventListener('click', function(e) {
        const dropdown = document.getElementById('user-dropdown');
        const button = document.getElementById('user-menu-button');
        if (dropdown && !dropdown.contains(e.target) && !button.contains(e.target)) {
            dropdown.classList.add('hidden');
        }
    });
</script>
